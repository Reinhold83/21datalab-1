<html>
<head>
    <title>21datalab workbench 0.1</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Declare the bootstrap and jstree style sheets empty, based on the stored theme (dark/light) they shall be populated -->
    <link id="bootstrap_theme" rel="stylesheet"/>
    <link id="jstree_theme" rel="stylesheet"/>

    <script src="modules/jquery/jquery.js"></script>

    <!-- Execute this script here, in order to set the bootstrap and jstree theme as soon as possible, thus avoiding the flickering page issue -->
    <script>
        // Retrieve the theme from the local storage
        var datalabGlobalTheme = localStorage.getItem("21datalabTheme");

        // Set the default path to the light theme
        let pageThemePath = "/modules/bootswatch/dist/flatly/bootstrap.min.css";
        let treeThemePath = "/modules/jstree/dist/themes/default/style.min.css";
        // In case the theme is set to dark, set the proper paths
        if (datalabGlobalTheme == "dark") {
            pageThemePath = "/modules/bootswatch/dist/darkly/bootstrap.min.css"
            treeThemePath = "/modules/jstree/dist/themes/default-dark/style.min.css";
        }
        // Apply the themes
        $('#bootstrap_theme').attr('href', pageThemePath);
        $('#jstree_theme').attr('href', treeThemePath);
    </script>

    <link rel="stylesheet" href="modules/bootstrap-select/dist/css/bootstrap-select.min.css"/>
    <link rel="stylesheet" href="modules/font-awesome/css/all.css"/>
    <link rel="stylesheet" href="modules/bootstrap-navbar-sidebar/dist/navbar-fixed-left.css"/>

    <link rel="stylesheet" href="css/style.css"/>

    <link rel="icon" type="image/x-icon" href="favicon.ico"/>

    <script src="modules/other/popper.min.js"></script>
	<script src="modules/jstree/dist/jstree.min.js"></script>
    <script src="modules/jstree-grid/jstreegrid.js"></script>
    <script src="modules/bootstrap/js/bootstrap.js"></script>
    <script src="modules/font-awesome/js/all.js"></script>

    <script src="js/utils.js"></script>
	<script src="js/tree.js"></script>
    <script src="modules/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
    <script src="js/index.js"></script>
</head>

<body >
    <nav class="navbar navbar-expand-lg fixed-left navbar-dark bg-primary text-center pl-0 pr-0">
        <div class="text-center nav-brand-image mt-2">
            <a href="http://www.21data.io">
                <img src="img/logo.png" height="30" alt="21data.io" class="rounded">
            </a>
        </div>
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse mt-4" id="navbarResponsive">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link nav-item-hover" href="#nav-data" data-toggle="tab">
                        <h3>
                            <i class="fas fa-database"></i>
                        </h3>
                        <div class="nav-item-text">
                            Data
                        </div>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-item-hover active" href="#nav-modelling" data-toggle="tab">
                        <h3>
                            <i class="fas fa-network-wired"></i>
                        </h3>
                        <div class="nav-item-text">
                            Modelling
                        </div>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-item-hover" href="#nav-self-service" data-toggle="tab">
                        <h3>
                            <i class="fas fa-chalkboard-teacher"></i>
                        </h3>
                        <div class="nav-item-text">
                            Self-service
                        </div>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-item-hover" href="#nav-deployment" data-toggle="tab">
                        <h3>
                            <i class="fas fa-cubes"></i>
                        </h3>
                        <div class="nav-item-text">
                            Deployment
                        </div>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-item-hover" href="#nav-settings" data-toggle="tab">
                        <h3>
                            <i class="fas fa-cog"></i>
                        </h3>
                        <div class="nav-item-text">
                            Settings
                        </div>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="tab-content">
            <div id="nav-data" class="tab-pane fade">
                <div class="container mt-4">
                    <!-- <div class="row mb-4">
                        <div class="col">
                            <div class="card">
                                <div class="card-header">
                                    Model
                                </div>
                                <div class="card-body">
                                    <div class="form-group row">
                                        <label class="col">Current Model</label>
                                        <label class="col">name</label>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-4">Load Model</label>
                                        <div class="col-4">
                                            <select class="form-control" id="modelSelect"></select>
                                        </div>
                                        <div class="col-4">
                                            <button class="btn btn-primary" id="loadModelBtn">Load</button>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-4">Save Model</label>
                                        <div class="col-4">
                                            <input class="form-control" type="text" id="modelNameInput"></input>
                                        </div>
                                        <div class="col-4">
                                            <button class="btn btn-primary" id="saveModelBtn">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->

                    <div class="row mb-4">
                        <div class="col">
                            <div class="card">
                                <div class="card-header">
                                    Import data
                                </div>
                                <div class="card-body">
                                    <div class="form-group row">
                                        <label class="col">Source Database</label>
                                        <div class="col">
                                            <select class="form-control">
                                                <option>elasticsearch</option>
                                                <option>mongoDB</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group row mb-0">
                                        <label class="col">URL</label>
                                        <div class="col">
                                            <input class="form-control" type="text"></input>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <button class="btn btn-sm btn-primary">Import</button>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
            <div id="nav-modelling" class="tab-pane fade active show">
                <div class="container-fluid mt-4">

                    <!-- Modal for saving model -->
                    <div class="modal fade" id="saveModelAsModal" tabindex="-1" role="dialog">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title">Save Model As</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group">
                                        <label>Model Name</label>
                                        <input type="text" class="form-control" id="saveModelAsModelName">
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-primary" data-dismiss="modal" id ="saveModelAsBtnApply">Save model</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modal for loading model -->
                    <div class="modal fade" id="loadModelModal" tabindex="-1" role="dialog">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title" id="myModalLabel">Load Model</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group">
                                        <label>Model Name</label>
                                        <select class="form-control" id="modelSelect"></select>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-primary" data-dismiss="modal" id ="loadModelBtnApply">Load model</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-3">
                            <div class="card">
                                <div class="card-header">
                                    <span id="currentModelName"></span>
                                    <div class="card-header-actions">
                                        <a id="reloadtreebtn" class="card-header-action" data-toggle="tooltip" data-placement="top" title="Reload tree">
                                            <i class="fas fa-redo-alt"></i>
                                        </a>
                                        <a id="updatetreebtn" class="card-header-action" data-toggle="tooltip" data-placement="top" title="Toggle tree auto-refresh">
                                            <i class="fas fa-sync-alt"></i>
                                        </a>
                                        <a id="saveModelBtn" class="card-header-action" data-toggle="tooltip" data-placement="top" title="Save current tree">
                                            <i class="fas fa-save"></i>
                                        </a>
                                        <a id="saveModelAsBtn" class="card-header-action" data-toggle="tooltip" data-placement="top" title="Save current tree as ...">
                                            <i class="fas fa-file-export"></i>
                                        </a>
                                        <a id="loadModelBtn" class="card-header-action" data-toggle="tooltip" data-placement="top" title="Load tree ...">
                                            <i class="fas fa-folder-open"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="pre-scrollable" id="jstreeContainer" style="overflow-y: auto;overflow-x: auto;width:100%">
                                        <div id="jstree_div" class="jstree jstree-default"></div>
                                    </div>
                                </div>
                            </div>

                            <div id="navtree">

                                <!-- Modal for value -->
                                <div class="modal fade" id="editNodeModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h4 class="modal-title" id="myModalLabel">Edit Node Value</h4>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <label id="editNodeModalName">nodePath</label>
                                                    <label id="editNodeModalId" hidden>id</label>
                                                    <input type="email" class="form-control" id="editNodeModalValue" aria-describedby="emailHelp" >
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                <button type="button" class="btn btn-primary" data-dismiss="modal" id ="editNodeModalButtonSave">Save changes</button>
                                            </div>
                                        </div>
                                    </div>
                                </div> <!-- modal end -->
                                <!-- Modal for properties -->
                                <div class="modal fade" id="advancedEditModal" tabindex="-1" role="dialog" aria-labelledby="advancedEditModalLabel">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h4 class="modal-title" id="advancedEditModalLabel">Edit Node Type</h4>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <label id="advancedEditModalName">nodePath</label>
                                                    <label id="advancedEditModalId" hidden>id</label>
                                                    <input type="email" class="form-control" id="advancedEditModalValue" aria-describedby="emailHelp" >
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                <button type="button" class="btn btn-primary" data-dismiss="modal" id ="advancedEditModalButtonSave">Save changes</button>
                                            </div>
                                        </div>
                                    </div>
                                </div> <!-- modal end -->

                            </div>
                        </div>

                        <div id = "newtree"></div>
                        <div class="col-9"  >
                            <div class="card">
                                <div class="card-header">
                                    Time Series View
                                </div>
                                <div class="card-body">
                                    <div class="col" id ="ui-layout-workbench"  uiinfo='{"path":"root.deployment.ui.layout.workbench"}'> </div>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div id="nav-self-service" class="tab-pane fade">
                <div class="container mt-4">
                    <div class="row">
                        <div class="col" id ="ui-layout-self-service"  uiinfo='{"path":"root.deployment.ui.layout.selfservice"}'>
                            <h5>Self-service</h5>
                        </div>
                    </div>
                </div>
            </div>
            <div id="nav-deployment" class="tab-pane fade">
                <div class="container mt-4">
                    <div class="row mb-4">
                        <div class="col">
                            <div class="row mb-2">
                                <div class="col">
                                    <h5>Services</h5>
                                </div>
                            </div>
                            <div class="row mb-1">
                                <div class="offset-1 col-5">
                                    UI self-service production 2
                                </div>
                                <div class="col-md-6">
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-play"></i></button>
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-power-off"></i></button>
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-redo-alt"></i></button>
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-eye"></i></button>
                                </div>
                            </div>
                            <div class="row mb-1">
                                <div class="offset-1 col-5">
                                    OPC UA Client - AB01
                                </div>
                                <div class="col">
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-play"></i></button>
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-power-off"></i></button>
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-redo-alt"></i></button>
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-eye"></i></button>
                                </div>
                            </div>
                            <div class="row mb-1">
                                <div class="offset-1 col-5">
                                    OPC UA Server - EE23
                                </div>
                                <div class="col">
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-play"></i></button>
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-power-off"></i></button>
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-redo-alt"></i></button>
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-eye"></i></button>
                                </div>
                            </div>
                            <div class="row mb-1">
                                <div class="offset-1 col-5">
                                    Regression model - 23E
                                </div>
                                <div class="col">
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-play"></i></button>
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-power-off"></i></button>
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-redo-alt"></i></button>
                                    <button type="button" class="btn btn-secondary"><i class="fas fa-eye"></i></button>
                                </div>
                            </div>
                            <div class="form-group row mb-1">
                                <div class="offset-1 col-5">
                                    <select class="form-control">
                                        <option value="" disabled selected></option>
                                        <option>OPC UA Cient</option>
                                        <option>OPC UA Server</option>
                                        <option>Regression Model</option>
                                    </select>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="nav-settings" class="tab-pane fade">
                <div class="container mt-4">
                    <div class="row mb-4">
                        <div class="col">
                            <div class="card">
                                <div class="card-header">
                                    Settings
                                </div>
                                <div class="card-body">
                                    <div class="form-group row mb-0">
                                        <label class="col">Theme</label>
                                        <div class="col">
                                            <select class="form-control" id="themeSelect">
                                                <option>light</option>
                                                <option>dark</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <button class="btn btn-primary btn-sm" id="applySettings">Apply</button>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    // Adjust the navigation item classes when tab starts to load
    $('.nav-link').on('show.bs.tab', function (e) {
        $('.nav-link.show').removeClass('show');
        $('.nav-link.active').removeClass('active');
    });
</script>

</html>